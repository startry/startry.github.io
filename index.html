<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Startry Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="Startry Blog">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Startry Blog">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Startry Blog">
<meta name="twitter:description">
  
    <link rel="alternative" href="/atom.xml" title="Startry Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  <script src="http://libs.baidu.com/jquery/1.9.0/jquery.js"></script>
</head>

<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			<img lazy-src="https://avatars2.githubusercontent.com/u/3454027?v=3&amp;s=460" class="js-avatar">
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">Startry</a></h1>
		</hgroup>

		
		<p class="header-subtitle">随便乱写</p>
		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						<div class="icon-wrap icon-link hide" data-idx="2">
							<div class="loopback_l"></div>
							<div class="loopback_r"></div>
						</div>
						
						
						<div class="icon-wrap icon-me hide" data-idx="3">
							<div class="user"></div>
							<div class="shoulder"></div>
						</div>
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>标签</li>
						
						<li>友情链接</li>
						
						
						<li>关于我</li>
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="http://github.com/startry" title="github">github</a>
					        
								<a class="weibo" target="_blank" href="http://weibo.com/chenxingstartry" title="weibo">weibo</a>
					        
								<a class="zhihu" target="_blank" href="http://www.zhihu.com/people/startry" title="zhihu">zhihu</a>
					        
								<a class="mail" target="_blank" href="mailto:chenxingfl#gmail.com" title="mail">mail</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/Jenkins/" style="font-size: 10px;">Jenkins</a> <a href="/tags/ios/" style="font-size: 20px;">ios</a> <a href="/tags/xcconfig/" style="font-size: 10px;">xcconfig</a>
					</div>
				</section>
				
				
				
				<section class="switch-part switch-part3">
					<div id="js-friends">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://github.com/startry">空荡荡的github</a>
			        
			        </div>
				</section>
				

				
				
				<section class="switch-part switch-part4">
				
					<div id="js-aboutme">思考中...</div>
				</section>
				
			</div>
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">Startry</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img lazy-src="https://avatars2.githubusercontent.com/u/3454027?v=3&amp;s=460" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author">Startry</h1>
			</hgroup>
			
			<p class="header-subtitle">随便乱写</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="http://github.com/startry" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="http://weibo.com/chenxingstartry" title="weibo">weibo</a>
			        
						<a class="zhihu" target="_blank" href="http://www.zhihu.com/people/startry" title="zhihu">zhihu</a>
			        
						<a class="mail" target="_blank" href="mailto:chenxingfl#gmail.com" title="mail">mail</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <div class="body-wrap">
  
    <article id="post-iOS_EnvWithXcconfig" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/07/24/iOS_EnvWithXcconfig/" class="article-date">
  	<time datetime="2015-07-24T11:38:07.000Z" itemprop="datePublished">2015-07-24</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/07/24/iOS_EnvWithXcconfig/">iOS开发必备 - 环境变量配置(Debug &amp; Release)</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>本篇文章主要讲述了如何使用<a href="https://developer.apple.com/library/ios/recipes/xcode_help-project_editor/Articles/BasingBuildConfigurationsonConfigurationFiles.html" target="_blank" rel="external">(Xcode配置文件xcconfig)</a>去动态配置开发或者生产网络环境, 以及在多项目和运行中如何切换环境。</p>
<p>关于xcconfig文件, 目前在官方很难找到一篇专门的指南介绍, 但是国外有篇非官方指南<a href="http://pewpewthespells.com/blog/xcconfig_guide.html" target="_blank" rel="external">《The Unofficial Guide to xcconfig files》</a>详细的介绍了xcconfig。估计很多新入门的iOS开发对xcconfig文件都不是很熟悉, 但是大家可能都用过Cocoapods, 其实Cocoapods的项目配置管理很多都是依赖xcconfig文件去实现的。</p>
<h3 id="Debug宏应该在哪里定义?">Debug宏应该在哪里定义?</h3><p>iOS系统本身就区分了Configurations选项让开发者去修改对应的开发环境配置, 但是因为很多开发者却又在同一个Configuration环境中自定义了开发环境配置的开发, 使得iOS系统本身的配置成为了摆设, <em>仅仅用于区分打包方式选项和证书配置</em>。</p>
<p><strong>网络环境切换</strong>是每一个互联网App开发者都会频繁用到的功能, 那么大家都是用什么样的方式在切换环境的呢?我本人接触的项目中最多的就是在预编译头文件里面写一行宏定义, 然后根据宏定义去判断当前的环境。</p>
<p><font color="orange">最典型的例子</font>是在预编译头pch文件中添加一行代码<code>#define DEBUG 1</code>。然后通过这个<code>DEBUG</code>参数去判断当前环境是否处于开发网络或者生产网络环境。</p>
<p>使用<code>DEBUG</code>宏去判断判断开发环境还是生产环境没有任何问题, 关键的问题是我们在什么时候去定义这个宏和怎么去动态配置这个宏。</p>
<h2 id="动态配置不同的网络开发环境">动态配置不同的网络开发环境</h2><p>开发环境的切换在代码中最实用的还是宏定义, 那么我们怎么样才能够让宏定义<font color="red">动态</font>可配置呢?<br><br>其中一种办法就是使用GCC预编译头参数<code>GCC_PREPROCESSOR_DEFINITIONS</code>。</p>
<p>通常我们可以在Project文件下的Build Settings对预编译宏定义进行默认赋值。在Xcode6下的路径为<code>Build Settings</code>-&gt;<code>Apple LLVM 6.x Preprocessing</code>-&gt;<code>Preprocessor Macros</code><br><img src="http://blog.startry.com/img/blog_setting_pcm_demo.png" alt="预编译Setting示例"></p>
<p>想必大家看这个宏的名字已经知道它的作用了, 实际上就是和在pch头文件中添加宏定义没有太大的区别, 实际上还是有一些好处:</p>
<ul>
<li>Xcode的Project的Build Settings是由一个plist文件进行描述的, plist本质上是一个XML配置文件, 通过外部的脚本比较容易去修改。</li>
<li>Preprocessor Macros可以按照Configuration选项进行默认配置, 也就是说可以根据不同的环境预先制定不同定义的宏</li>
</ul>
<h5 id="xcconfig配置Build_Settings">xcconfig配置Build Settings</h5><p>Xcode Project的Build Settings属性有很多, 如果每一个属性都在配置项改过去比较麻烦, 而且容易忘记, 而且Build Settings用源码的打开可阅读性也不是很高, 这个时候, 我们可以使用xcconfig文件去配置Build Settings参数。</p>
<p>xcconifg支持可以根据不同的Configuration选项配置不同的文件。不同的xcconfig可以指定不同的Build Settings里的属性值, 这样子我们就可以通过项目xcconifg去修改<code>GCC_PREPROCESSOR_DEFINITIONS</code>的值了(最终目的就达到了)。</p>
<p>利用xcconfig配置Build Settings的方式比直接在项目Build Settings修改对应的属性值要优雅的多, 英国的iOS大神<a href="https://github.com/jspahrsummers" target="_blank" rel="external">Justin Spahr-Summers</a>书写的开源库<a href="https://github.com/jspahrsummers/xcconfigs" target="_blank" rel="external">xcconfigs</a>提供了一个类权威的模板, 大家可以参考编写以及学习使用xcconfig。</p>
<h3 id="Object-C下配置的支持">Object-C下配置的支持</h3><p>在项目中的Info类目下, 大家可以配置Configuration对应的选项的xcconfig, 通过xcconfig来配置Build Setting中的参数(见下图)。<br><img src="http://blog.startry.com/img/blog_xcconfig_configurations.png" alt="配置Configuration的各个xcconfig"></p>
<p>PS: 如果大家对Cocoapods比较熟悉的话, 你会发现其实Pods也是通过xcconfig文件去修改项目配置参数的。</p>
<h3 id="Swift下配置的支持">Swift下配置的支持</h3><p>这里区分Object-C和Swift没有太大的意义。只不过因为C语言使用一些非常不安全的预处理器指令能力，Swift则只使用预处理器指令的安全子集。因此预编译头参数在Swift并不会生效, 需要增加<code>OTHER_SWIFT_FLAGS</code>标记才能够将<code>Debug</code>作用于Swift的条件式判断。标记书写方式参考下方示例:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">OTHER_SWIFT_FLAGS = -D DEBUG</span><br></pre></td></tr></table></figure>
<h2 id="动态修改配置文件">动态修改配置文件</h2><p>环境切换的标志位宏被提取到Build Setting中的<code>GCC_PROCESSOR_DEFINTIONS</code>有什么好处呢?</p>
<ul>
<li>外部修改只需要修改工程的<code>project.pbxproj</code>即可对<code>GCC_PROCESSOR_DEFINTIONS</code>参数进行操作修改</li>
<li>可以通过xcconfig去配置参数, 而配有xcconfig的Configuration可以通过<code>xcodebuild</code>命令指定</li>
<li>可以避免将最基础的Debug和Release网络环境切换书写在代码中</li>
</ul>
<h3 id="自动化脚本支持(便于自动化构建)">自动化脚本支持(便于自动化构建)</h3><p>一个优秀的iOS工程师一定会使用自动化构建应用去解放自己的打包时间。<a href="http://blog.startry.com/2015/06/23/iOS_CI_With_Jenkins/" target="_blank" rel="external">《搭建自动化构建服务》</a>讲述了如何搭建一个自动化构建程序, 可以作为参考。</p>
<p>自动化构建的核心在于使用xcodebuild命令和各类脚本, 本文讲述2个场景:</p>
<ul>
<li>场景1: 环境变量由宏定义并且书写在项目的预编译头文件中或者在预编译头文件引用的<code>.h</code>文件中; <ul>
<li>通过脚本动态替换行, 可以采用sed命令来替换, 最典型的实例如下:</li>
</ul>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -i <span class="string">''</span> <span class="string">'s/^#define Debug 1/\/\/#define Debug 1/'</span> <span class="string">"./Demo/STSwitch.h"</span></span><br></pre></td></tr></table></figure>
<ul>
<li>场景2: 环境变量由宏定义但是配置在<code>GCC_PREPROCESSOR_DEFINITIONS</code>编译选项中。<ul>
<li>如果<code>GCC_PREPROCESSOR_DEFINITIONS</code>由xcconfig文件指定并配置对应的Configuration中, 直接通过<code>xcodebuild</code>命令指定<code>-configuration</code>参数来选择。</li>
<li>如果<code>GCC_PREPROCESSOR_DEFINITIONS</code>需要在Build Settings中动态修改, 可以在Podfile中书写Hook代码或者用脚本解析配置文件进行动态修改。</li>
</ul>
</li>
</ul>
<h3 id="Cocoapods下支持">Cocoapods下支持</h3><p>如果大家对Cocoapods比较熟悉的话, 就会知道每次执行完<code>pod install</code>之后, Cocoapods都会对每一个工程的Configuration配置一个xcconfig文件。</p>
<p>默认情况下, 如果配置项已经存在了xcconfig文件, Cocoapods是不会将生产的xcconfig文件设置入配置项的。Cocoapods是通过xcconfig文件去修改外部链接依赖的, 因此如果没有正常替换配置文件, 有肯能会导致整个工程无法编译通过(缺少依赖库能通过才怪啦)。</p>
<p>解决方法</p>
<ul>
<li>如果自己修改的xcconfig文件内容<strong>不多</strong>, 可以通过在Podfile中编写hook去实现修改对应的项目参数, 参考示例如下:</li>
</ul>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">post_install <span class="keyword">do</span> |installer|</span><br><span class="line">    installer.pods_project.targets.each <span class="keyword">do</span> |target|</span><br><span class="line">        target.build_configurations.each <span class="keyword">do</span> |config|</span><br><span class="line">            <span class="keyword">if</span> config.name == <span class="string">'Debug'</span></span><br><span class="line">                config.build_settings[<span class="string">'GCC_PREPROCESSOR_DEFINITIONS'</span>] = <span class="string">'Debug=1'</span></span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<ul>
<li>如果自己修改的xcconfig文件内容<strong>较多</strong>, 可以在自己的编写的xcconfig include Cocoapods生产的xcconfig文件的方式进行处理, 参考示例如下:</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// 自定义的xcconfig (例如: st.debug)</span><br><span class="line"><span class="comment">#include "../Pods.debug"</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// 自定义的xcconfig (例如: st.release)</span><br><span class="line"><span class="comment">#include "../Pods.release"</span></span><br></pre></td></tr></table></figure>
<h3 id="多项目环境下支持">多项目环境下支持</h3><p>多项目的环境配置往往是比较麻烦的, 比如有B、C、D三个子工程, A工程引用了B、C、D三个子工程。怎么把统一的环境变量怎么应用到A、B、C、D三个工程里呢?</p>
<ul>
<li>做法1: 建立一个公有引用的项目(无论Pods还是手动), 所有的项目均引用这个公有的项目, 公有的项目暴露一个头文件里面定义了所有的环境变量。</li>
<li>做法2: 每一个项目均维护自己的初始值, 通过外部的脚本一次性修改所有项目的初始值保持统一。</li>
<li>做法3: 每一个项目维护自己的初始值, 通过上文描述的GCC编译属性或者xcconfig控制, 通过脚本或者Podfile控制每一个项目初始值</li>
<li>做法4: 每个项目的维护自己的初始值, 但是所有环境变量动态维护, 在主工程的AppDelegate中加载A项目的初始值并通过接口赋值给每一个子工程。(该方式宏定义智能作为初始值, 参考下文<code>动态切换配置</code>)</li>
</ul>
<h3 id="动态切换配置">动态切换配置</h3><p>文章前面所述均少了一个关键字<code>初始值</code>, 前面所添加的环境变量的方式都是在添加<code>初始环境变量常量</code>。</p>
<p>假设有一个运营或者测试需求, 需要能够用户自己去选择网络配置或者环境基础变量, 按照文章前面描述的方法, 是无法实现的。 因此, 上述的方式都只能提供一个初始默认值, 并无法在运行中去修改, 因为上述配置的方式都是通过<strong>预编译</strong>去实现的。</p>
<p>在App运行时切换环境, 那配置参数都不能简单的用宏或者常量来控制了, 需要讲环境配置参数存储在变量中, 通常是用<code>NSUserDefault</code>或者<code>Singleton</code>去维护环境变量集合。通过开发配置页面对维护的变量进行动态的修改。(建议在Debug模式下开启放置在系统的Setting界面下)</p>
<h2 id="另外一种选择">另外一种选择</h2><p>除了通过宏初始化, 是否还有其它的读取配置文件的方式初始化呢?</p>
<p>我们可以维护一个单例去管理所有的初始值, 在iOS应用开发中用属性值去管理开发环境和生产环境(坏处很明显, 控制力度没有<code>宏</code>这么大)。</p>
<p>资源文件加载其实就是把参数写在资源文件中, 然后通过代码在AppDelegate启动的时候去加载初始值到全局维护的单例中, 然后在工程中到处使用单例的实例变量去判断环境。</p>
<h3 id="Cocoapods-keys">Cocoapods-keys</h3><p>通过配置加载环境配置环境变量是否能够做到工程依赖无关呢? 换言之就是在不同的安装目录或者不同的机器环境下配置不一样的环境变量, 让环境变量不与工程直接关联而与工程所在目录环境关联起来呢?</p>
<p>做过服务端开发的童鞋们应该熟悉有一种config配置的方式, 让config在外部注入, 而不是在开发工程中写死, 即使写死也只是个初始值。</p>
<p>Cocoapods提供了一款插件<a href="https://github.com/orta/cocoapods-keys" target="_blank" rel="external">Cocoapods-keys</a>, 提供了外部注入键值对的功能, 通过Cocoapods-keys插件, 我们可以在工程中调用外部注入的键值对, 通过外部的键值对工程进行一定力度的控制。</p>
<p>Cocoapods-keys注入的键值对均存储在<code>~/.cocoapods/keys</code>下, 是以yml的格式保存的, yml中描述了已经添加的键值对和对应项目路径。</p>
<h2 id="总结">总结</h2><p>文章想表达的核心思想是将环境切换初始化提取到配置文件处, 方便外部脚本修改(例如Podfile、自己写的Bash Shell等等)。在多项目环境下, 配置文件修改配置项更加容易可控, 防止多处修改代码或者使用脚本动态修改代码。</p>
<p>文章的作用是给我本人备忘用的哈~ 水平有限, 有错误支持请大家及时指出哈~<br>转载请注明出处哦~</p>
<p>参考文章:</p>
<ol>
<li><a href="http://pewpewthespells.com/blog/xcconfig_guide.html" target="_blank" rel="external">http://pewpewthespells.com/blog/xcconfig_guide.html</a></li>
<li><a href="http://www.jianshu.com/p/44c82630bd50" target="_blank" rel="external">http://www.jianshu.com/p/44c82630bd50</a></li>
</ol>

      
    </div>
    
    <div class="article-info article-info-index">
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ios/">ios</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/xcconfig/">xcconfig</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>






  
    <article id="post-iOS_CI_With_Jenkins" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/06/23/iOS_CI_With_Jenkins/" class="article-date">
  	<time datetime="2015-06-23T11:24:07.000Z" itemprop="datePublished">2015-06-23</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/06/23/iOS_CI_With_Jenkins/">iOS开发必备 - 搭建自动化构建服务</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>本篇文章讲述了如何使用<a href="https://jenkins-ci.org/" target="_blank" rel="external">Jenkins</a>搭建iOS的自动化构建环境。</p>
<p>iOS自动化构建<a href="https://developer.apple.com/library/ios/documentation/IDEs/Conceptual/xcode_guide-continuous_integration/" target="_blank" rel="external">官方有篇文章介绍Xcode持续集成</a>, 是基于Xcode Server以及Xcode Bots去实现, 但是系统依赖和版本依赖过于严重, 并且需要在Xcode中配置Target的Shared属性, 耦合性太强, 因此不建议使用。</p>
<h2 id="为什么客户端需要自动化构建">为什么客户端需要自动化构建</h2><p>个人觉得最主要的原因是需要<em>提高编码效率</em>, 其次是<em>方便测试与集成</em></p>
<ol>
<li><p><font size="4">场景: 开发过程中, 不断的有产品或者测试介入, 需要你不定时的打包给他们提供体验与测试。</font><br>对于小工程来说, build一下可能就是几秒钟的事情, 但是对于大工程来说, 一次打包可能耗费5分钟乃至10分钟的开发时间。开发者一天中的有效开发时间是有限的, 在不断被打断的情况下, 开发者的产能实际上十分低效的。</p>
</li>
<li><p><font size="4">场景: 联调过程中, 需要有第三方的SDK接入联调, 需要不断的为对方更改SDK, 然后重新编译打包。</font><br>这种场景一般发生在多个公司协作的时候, 本人在开发某二手车批发软件的时候, 就曾遇到与第三方支付平台接入联调的问题, 一天中80%时间为对方提供打包服务, 生产效能过低。</p>
</li>
<li><p><font size="4">场景: 用户预览&amp;客户演示。</font><br>这个场景比较类似第一个场景, 不过是面向不专业的人事或者客户, 需要不定时更新版本然后提供<em>企业证书</em>打包的预览版给老板和客户。严格意义上来说, 与第一个场景是同样一个场景。</p>
</li>
<li><p><font size="4">场景: 测试集成。</font><br>自动化构建和持续集成本来就是一码事, 如果你是个喜欢写集成测试的开发者, 那么在每一次打包编译的时候都要运行一次集成测试是很浪费时间的(PS: 集成测试不通过这个场景除外哦`)。将测试集成在构建步骤里面, 可以让自动化集成的所有行为在另外一台机器上工作, 工程师该干嘛还是干嘛去。</p>
</li>
</ol>
<p>还有其他很多应用场景, 不过我个人暂时为了上述目的而搭建CI环境。最主要的目的是解放打包时间, 防止开发工作被打断。</p>
<h2 id="准备工作">准备工作</h2><h3 id="硬件环境">硬件环境</h3><ol>
<li><font size="4">搭载Macintosh系统的一台硬件设备或虚拟机。</font><br>既然是编译<em>iOS</em>应用, 那自然少不了苹果一系列的机器啦,  一台搭载Macintosh OS操作系统的电脑还是必须的, 目前本人采用的硬件方案是Mac mini。<br>需要Macintosh是因为Xcode运行环境在该系统上, 因此如果你想利用脚本编译iOS应用, 你就需要Xcode, 如果你需要Xcode, 那你又必须处于Macintosh OS环境(哎~ 苹果的生态链)。<br>鉴于目前国内的云服务器均为windows或者Linux, 您如果想用Geek的方式去搭建iOS的自动化构建方式, 可以尝试在云服务器上安装虚拟机然后运行Mac OS环境的方案。</li>
<li>在准备做CI的机器上安装Java SDK环境 &amp; Xcode。<br>Xcode可以用过App Store直接安装, Xcode体积非常大, 但是因为iOS编译脚本xcodebuile命令依赖于Xcode,因此Xcode是必须安装的。<br>Java运行环境是Jenkins需要, 因为Jenkins是基于Java实现的一套构建系统, Java SDK可以通过Oracle的官网去下载最新的适用版本, 在本文书写的时候, 最新的Java SDK是JDK8, 下载地址为 <a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html" target="_blank" rel="external">http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html</a></li>
</ol>
<h3 id="安装Jenkins">安装Jenkins</h3><ol>
<li><p>在Mac OS环境下, 建议采用Homebrew来安装, 获取Homebrew建议采用官网的方式。通过<a href="http://brew.sh" target="_blank" rel="external">Homebrew官网</a>获取homebrew后执行如下命令:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ brew install jenkins</span><br></pre></td></tr></table></figure>
</li>
<li><p>利用homebrew安装完毕后, 可以在终端执行<code>which jenkins</code>查看是否已经安装成功。</p>
</li>
<li>在终端执行<code>jenkins</code>命令启动Jenkins(PS: 默认占用8080端口会导致启动失败), 此处有可能会出现Jenkins ssl证书过期的问题, 可以通过修改os系统时间, 调整为ssl支持的时间来解决, 否则安装Jenkins插件可能会失败。(jenkins命令依赖Java开发环境, 旧版本的Jenkins需要自己去配置bash alias)</li>
<li>打开浏览器, 访问<a href="http://localhost:8080" target="_blank" rel="external">http://localhost:8080</a>, 查看Jenkins是否正常启动(默认端口8080)。</li>
</ol>
<h2 id="配置工作">配置工作</h2><h3 id="Jenkins插件配置">Jenkins插件配置</h3><p><img src="http://blog.startry.com/img/blog_jenkins.png" alt="Jenkins项目"></p>
<p>Jenkins是个生态比较完善的自动化构建系统, 提供了各种的可扩展插件给用户下载, 同时又开放接口, 让大家自主开发对应的插件。插件管理路径是<code>系统管理</code>-&gt;<code>管理插件</code></p>
<p>插件索引默认并不是最新的, 需要大家手动更新, 在<code>管理插件</code>-&gt;<code>可选插件</code>的右下角有个<code>立即获取</code>按钮, 点击即可获取最新的插件索引。</p>
<p>PS: <font color="red">有时候官方索引的地址ssl证书过期导致索引会更新失败, 大家可以通过浏览器调试获取证书到期时间, 然后将本机时间调整为过期以前的时间即可解决该问题。</font>(apache有时候也不靠谱啊。。)</p>
<p>每个开发者根据不同的业务场景需要用到不同的插件, 本文就不在这里赘述, 大家自由发挥吧。</p>
<h3 id="Jenkins账户权限配置">Jenkins账户权限配置</h3><p>Jenkins用户权限配置和本文主题无关, 主要是方便大家对Jenkins用户进行访问控制。可以参考文章”<a href="http://my.oschina.net/donhui/blog/424980" target="_blank" rel="external">Jenkins安全配置/访问控制/审计</a>“或文章”<a href="http://bookong.iteye.com/blog/1964182" target="_blank" rel="external">Jenkins使用经验谈5(用户的登录与权限设定等)</a>“进行配置。</p>
<p>我个人是比较喜欢采用安全域里的<code>Jenkins专有用户数据库</code>进行配置, 因为自带的比较方便, 而且在不复杂的企业环境里面已经够用, 负责的企业环境就另当别论了。大致流程如下:</p>
<ol>
<li>在Jenkins页面上注册一个新用户(当然可以导入)</li>
<li>在<code>系统管理</code>-&gt;<code>Configure Global Security</code>里的授权策略进行定向配置, 个人偏好采用<code>项目矩阵授权策略</code>进行管理。</li>
</ol>
<h3 id="项目&amp;脚本配置">项目&amp;脚本配置</h3><p>本文重点是如何自动化编译iOS项目, 这个其实大家应该很熟悉了, 就是利用<code>xcodebuild</code>命令和<code>xcrun</code>组合进行脚本编译和签名。编译脚本的编写本质上不缺分环境(Jenkins服务器环境or本机环境), 因此我们需要确保本机环境的脚本能够正常的工作, 个人偏好使用bash环境(因为不用安装其它的依赖), 然后使用下述的模板进行填空。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="shebang">#!/bin/bash</span></span><br><span class="line">projAbbr=<span class="string">'iOS_Bash_Build_Demo'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">autoBuild</span></span>()</span><br><span class="line">&#123;</span><br><span class="line">	prepareBuildEnv</span><br><span class="line">	updatePodsDeps</span><br><span class="line">	clearProjs</span><br><span class="line">	buildProjs</span><br><span class="line">	signProjs</span><br><span class="line">	uploadAppFile</span><br><span class="line">	<span class="built_in">echo</span> <span class="variable">$&#123;projAbbr&#125;</span> <span class="string">'- ALL Action Completed!'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">prepareBuildEnv</span></span>()</span><br><span class="line">&#123;</span><br><span class="line">	<span class="comment"># <span class="doctag"><span class="keyword">TODO</span></span> - 执行编译器准备工作, 可以调整项目配置等执行任务</span></span><br><span class="line">	<span class="comment"># eg: mkdir xxx</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">updatePodsDeps</span></span>()</span><br><span class="line">&#123;</span><br><span class="line">	<span class="comment"># <span class="doctag"><span class="keyword">TODO</span></span> - 更新Pod依赖</span></span><br><span class="line">	<span class="comment"># eg: pod install </span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">clearProjs</span></span>()</span><br><span class="line">&#123;</span><br><span class="line">	<span class="comment"># <span class="doctag"><span class="keyword">TODO</span></span> - clean项目</span></span><br><span class="line">	<span class="comment"># eg: xcodebuild -workspace "demo.xcworkspace"  -scheme "targetName"  -configuration 'Release Adhoc' clean</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">buildProjs</span></span>()</span><br><span class="line">&#123;</span><br><span class="line">	<span class="comment"># <span class="doctag"><span class="keyword">TODO</span></span> - 编译项目, 生产带证书签名的App文件</span></span><br><span class="line">	<span class="comment"># eg: xcodebuild -workspace "demo.xcworkspace" -sdk iphoneos -scheme "targetName" -configuration 'Release Adhoc' SYMROOT='$(PWD)'</span></span><br><span class="line">	<span class="comment"># eg: xcodebuild -workspace "demo.xcworkspace" -sdk iphoneos -scheme "targetName" -configuration 'Release Adhoc' CODE_SIGN_IDENTITY="keychain中证书代号名称" SYMROOT='$(PWD)'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">signProjs</span></span>()</span><br><span class="line">&#123;</span><br><span class="line">	<span class="comment"># <span class="doctag"><span class="keyword">TODO</span></span> - 填充签名脚本, 用于签名编译到的App, 打包成ipa文件</span></span><br><span class="line">	<span class="comment"># eg: xcrun -sdk iphoneos PackageApplication -v "demo.app" -o "demo.ipa" &gt; $logPath</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">uploadAppFile</span></span>()</span><br><span class="line">&#123;</span><br><span class="line">	<span class="comment"># <span class="doctag"><span class="keyword">TODO</span></span> - 上传App文件到发布平台</span></span><br><span class="line">	<span class="comment"># 蒲公英、Fir.im都是不错的选择哦</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果使用第三方平台, 一般不需要createPlist, 因为第三方平台都已经集成</span></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">createPlist</span></span>()</span><br><span class="line">&#123;</span><br><span class="line">	<span class="comment"># <span class="doctag"><span class="keyword">TODO</span></span> - 创建Plist文件, 用于企业证书下载</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">autoBuild</span><br></pre></td></tr></table></figure>
<p>上述脚本将编译步骤拆分为<code>准备环境</code>、<code>更新Cocoapods</code>、<code>clean项目</code>、<code>build项目</code>、<code>签名项目</code>和<code>上传ipa文件</code>六大步骤。脚本的每一个步骤其实都可以在Jenkins需找对应的插件进行图形化控制, 但是我本人喜欢编写脚本来轻量化Jenkins的依赖, 除非需要本地上传一些依赖配置的文件。</p>
<p>上述脚本的执行任务也可以通过组合<code>CocoaPods Jenkins Integration</code>插件、<code>Xcode integration</code>插件以及其他上传插件进行组合。但是我并不太喜欢过渡依赖Jenkins的图形界面, 因此并没有深度整合这两个插件。</p>
<font style="bold" color="black">脚本的核心代码注释在代码里的eg, xcodebuild命令进行clean以及build, 然后通过xcrun进行签名app生成ipa文件</font>

<p>clean清理脚本示例:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xcodebuild -workspace <span class="string">"demo.xcworkspace"</span>  -scheme <span class="string">"targetName"</span>  -configuration <span class="string">'Release Adhoc'</span> clean</span><br></pre></td></tr></table></figure>
<p>build编译脚本示例:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xcodebuild -workspace <span class="string">"demo.xcworkspace"</span> -sdk iphoneos -scheme <span class="string">"targetName"</span> -configuration <span class="string">'Release Adhoc'</span> CODE_SIGN_IDENTITY=<span class="string">"keychain中证书代号名称"</span> SYMROOT=<span class="string">'$(PWD)</span></span><br></pre></td></tr></table></figure></p>
<p>xcodebuild是Xcode Command Tool工具集里的一个命令, 可以通过<code>-workspace</code>指定固定的xcode工作空间或者通过<code>-project</code>指定固定的xcode项目。详细的参数可以参考<a href="https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man1/xcodebuild.1.html" target="_blank" rel="external">官方文档</a>。</p>
<p>sign签名脚本示例:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xcrun -sdk iphoneos PackageApplication -v <span class="string">"demo.app"</span> -o <span class="string">"demo.ipa"</span></span><br></pre></td></tr></table></figure></p>
<p>xcrun命令可以将app文件打包成ipa文件, 主要依赖xcodebuild命令中指定的证书, 如果没有有效证书的话, 只能在越狱的环境中安装ipa。</p>
<p><strong>大家可以尝试填充这个脚本, 来进行本地编译, 如果本地编译不通过, 那放在Jenkins上是肯定通过不了的。</strong></p>
<p>具体的脚本内容每个人各不相同, Github上有个叫<strong>BashShell</strong>的项目里包含一个脚本示例<a href="https://github.com/heyuan110" target="_blank" rel="external">build_install.sh</a>, 该项目作者编写的脚本非常详细, 大家可以参考编写。</p>
<ul>
<li>xcodebuild命令可以指定对应的签名文件, 可以通过预先上传签名文件到编译服务器的keychains中或者将证书存放于代码托管库中方便指定。</li>
<li>通过Jenkins执行的脚本会默认注入一些全局环境变量, 例如<code>${PWD}</code>、<code>${CHANGES}</code>等等。通过这些全局参数可以在执行脚本或者邮件等任务中打印动态数据。</li>
<li>Jenkins默认将返回值<strong>-1</strong>作为失败条件, 因此如果需要主动在脚本终止任务, <code>return -1</code>就可以触发Jenkins任务失败了。</li>
</ul>
<p>好了, 准备工作已经差不多了, 可以先将自己的脚本本地测试下了哦~ 编译通过了就可以开始配置Jenkins任务啦~</p>
<h2 id="开始自动化之旅">开始自动化之旅</h2><h3 id="新建任务">新建任务</h3><p>编译脚本、编译环境都准备好, Jenkins也正常运行了, 接下来就是创建Jenkins任务了。</p>
<ol>
<li>通过<code>新建</code>构建一个自由风格的软件项目。(同一个分支不同的任务也需要建立多个不同的Job, 每一个Job在服务器Home目录下的.jenkins文件夹下面会创建一个独立的job和workspace)</li>
<li>在配置界面配置对应的<code>源码管理</code>, 现在国内大部分开发者的开发项目应该依托于<code>gitlab</code>的吧。(gitlab需要制定对应的版本号)</li>
<li><p>设定自动执行循环时间: 在<code>构建触发器</code>勾选<code>Poll SCM</code>, 可以通过特定的表达式进行触发设定。点击输入框后方问号会提示触发表达式的规则与书写方式。</p>
<ul>
<li><p>例如12小时检查一次源码库更新可以表达如下:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">H H/<span class="number">12</span> * * *</span><br></pre></td></tr></table></figure>
</li>
<li><p>例如30分钟检查一次源码库更新可以表达如下:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">H/<span class="number">30</span> * * * *</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>在<code>构建</code>栏点击<code>增加构建步骤</code>, 选择<code>Execute Shell</code>, 在Command栏里面执行预先保存的脚本文件。假如默认保存在项目根目录下的脚本文件名为jenkins.sh, 则输入如下代码:</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh jenkins.sh</span><br></pre></td></tr></table></figure>
<ul>
<li>PS: 此处如果使用图形插件的同学们, 可以在这里添加对应的插件。</li>
</ul>
</li>
<li><p>构建后任务可以添加邮件提醒以及上传FTP等执行动作。</p>
</li>
</ol>
<h3 id="自动发送邮件">自动发送邮件</h3><ol>
<li>Jenkins默认提供了编译错误时候的自动邮件发送功能。 简易邮件功能需要在<code>系统管理</code>中的<code>系统设置</code>中的<code>邮件通知</code>栏进行设置。设置了邮件通知全局配置后, 在Jenkins Job配置的<code>增加构建后步骤</code>中可以配置简易的邮件通知, 简易版本的邮件通知仅仅支持在系统不稳定的时候通知相关的责任人与固定的邮件接收者。</li>
<li>Email Extension Plugin: Jenkins一个很强大的邮件系统, 可以配置各种各样的邮件内容, 也可以定制不同的触发条件以及接受者。配置使用可以参考其他博文, 例如这篇<a href="http://p.primeton.com/articles/54c1d470be20aa1bf9000066" target="_blank" rel="external">《Jenkins中配置ESB构建后自动发邮件》</a></li>
</ol>
<h3 id="自动化测试">自动化测试</h3><p>自动化测试可以参考构建脚本的使用方式, 单独书写shell任务去执行对应的测试任务, 也可以在构建脚本中提前穿插测试任务。本文中自动化测试并不是重点, 再这里不讨论, 后期更新相关内容。</p>
<h3 id="自动上传">自动上传</h3><p>自动化的最后一步就是提供方便的下载地址给需要安装App的测试体验人员。需要一个平台提供一个方便苹果app下载的平台, 目前市面上以<a href="http://fir.im" target="_blank" rel="external">fir.im</a>以及<a href="http://www.pgyer.com/" target="_blank" rel="external">蒲公英</a>使用率最广。</p>
<ol>
<li><p>第三方平台: 以<code>fir.im</code>为例子, fir.im平台集成了ipa文件下载所需要plist文件以及一张优美的下载页。ipa文件第一次需要自己上传产生一个对应url地址。因为该平台本身依赖于七牛云存储, 因此使用该平台的上传脚本可以使用七牛的<code>qrsync</code>脚本实现, 具体怎么上传请参考fir.im的<a href="http://fir.im/docs" target="_blank" rel="external">官方指南文档</a>。</p>
</li>
<li><p>自建平台: 自建平台比较麻烦, 需要产生对应的plist文件以及下载页面, 但是在很多高保密的企业下是不允许使用第三方平台的, 个人建议为公司搭建一个简易版本的fir.im, 方便以后使用。</p>
<ul>
<li>构建平台主要是承担的工作是企业证书下载环境的搭建以及历史版本的维护。企业证书下载环境最关键的部分是plist描述文件的生产以及https服务的支持<strong>(iOS7以后的items-service服务需要ssl且不接受伪造证书)</strong>。</li>
<li>Bryce Zhange的博文里面有一篇教大家使用Apache和PHP搭建一个服务器的博文<a href="http://www.cnblogs.com/brycezhang/p/4097487.html" target="_blank" rel="external">《iOS自动化编译》</a>, 大家可以参考。该博文包含了如何使用Bruce(heyuan110)的编译脚本以及如何采用<code>cat</code>&amp;<code>EOF</code>&amp;<code>&gt;&gt;</code>去动态生成plist文件。<br><br>PS: 个人不建议采用Apache搭建服务器, 可以试试Ngnix~ 其实最好是不要自己搭建了~</li>
</ul>
</li>
</ol>
<h2 id="总结">总结</h2><p>本文主要是总结了我个人喜爱的方式, 使用Jenkins+Bash脚本在Mac OS X环境下搭建一个自动化构建环境。通过自动化构建环境来将自己从体验人员和测试人员不断要求安装包的麻烦中解放出来专心编写工程代码。Bash主要在于<code>xcodebuild</code>和<code>xcrun</code>命令的使用, 以及提供了本人比较爱好的一套模板方便大家快速编写。Jenkins主要用于定时轮询代码和邮件通知。</p>
<p>文章的作用是给我本人备忘用的哈~ 水平有限, 有错误之处请大家及时指出哈~</p>
<h5 id="参考文献:">参考文献:</h5><ol>
<li><a href="http://p.primeton.com/articles/54c1d470be20aa1bf9000066" target="_blank" rel="external">http://p.primeton.com/articles/54c1d470be20aa1bf9000066</a></li>
<li><a href="http://www.cnblogs.com/brycezhang/p/4097487.html" target="_blank" rel="external">http://www.cnblogs.com/brycezhang/p/4097487.html</a></li>
</ol>

      
    </div>
    
    <div class="article-info article-info-index">
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Jenkins/">Jenkins</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ios/">ios</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>






  
    <article id="post-hello-world" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/06/09/hello-world/" class="article-date">
  	<time datetime="2015-06-09T14:19:45.000Z" itemprop="datePublished">2015-06-09</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/06/09/hello-world/">Hello World</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Welcome to <a href="http://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="http://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="http://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="Quick_Start">Quick Start</h2><h3 id="Create_a_new_post">Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="http://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run_server">Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="http://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate_static_files">Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="http://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy_to_remote_sites">Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="http://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>






  
  
</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2015 Startry
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
  <div style="display:none">
    <span id="busuanzi_container_site_pv" style="display:hidden;">本站总访问量<span id="busuanzi_value_site_pv"></span>次
    </span>
    <span id="busuanzi_container_site_uv">本站访客数<span id="busuanzi_value_site_uv"></span>人次
    </span>
  </div>
</footer>
<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>

    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">
  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="/js/mobile.js" type="text/javascript"></script>
<script src="/js/main.js" type="text/javascript"></script>





<! -- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>



  </div>
</body>
</html>